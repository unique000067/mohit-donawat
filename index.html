<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mohit Donawat - Pro Accountant Calculator</title>
<style>
  :root{
    --blue:#00aaff;
    --blue-soft:#00d9ff;
    --blue-strong:#0088cc;
    --text:#00d9ff;
    --text-strong:#00ffea;
    --bg-dark:#000;
    --bg-card:rgba(0,0,0,0.85);
    --shadow:rgba(0, 200, 255, 0.7);
    --muted:#66e0ff;
  }
  *{ box-sizing:border-box; }
  body{
    margin:0; font-family: Arial, sans-serif; color: var(--text);
    background:url('boss.jpg') center/cover fixed no-repeat;
  }
  .overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.5); backdrop-filter:blur(4px);
  }
  .app{
    position:relative; z-index:1; max-width:1100px; margin:24px auto;
    background:var(--bg-card); border-radius:14px; box-shadow:0 0 15px var(--shadow);
    border:1px solid rgba(255,255,255,.06); overflow:hidden;
  }
  header{
    padding:16px 20px; border-bottom:1px solid rgba(255,255,255,.08);
    display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:8px;
  }
  h1{ margin:0; color:#33ddff; font-size:22px; text-shadow:0 0 5px #000; }
  small{ color:var(--muted); }
  nav{
    display:flex; flex-wrap:wrap; gap:6px; background:#001f33; padding:10px 12px; position:sticky; top:0; z-index:10;
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  nav button{
    border:none; border-radius:8px; padding:8px 10px; cursor:pointer;
    background:#002a44; color:#fff; font-weight:600; transition:.15s;
  }
  nav button.active{ background:var(--blue); color:#fff; }
  .section{ display:none; padding:16px; }
  .section.active{ display:block; }

  .card{
    background:#00111c; border:1px solid rgba(255,255,255,.08);
    border-radius:12px; padding:14px; margin-bottom:12px;
  }
  .title{
    color:#33ddff; font-size:18px; margin-bottom:10px; font-weight:700;
  }
  label{
    display:block; text-align:left; margin:6px 0 4px; color:var(--muted); font-size:14px;
  }
  input, select{
    width:100%; padding:10px; border-radius:8px; border:2px solid var(--blue);
    background:var(--bg-dark); color:var(--blue-soft); font-size:16px; font-weight:600;
    outline:none; box-shadow:0 0 8px rgba(0,170,255,0.6); margin-bottom:10px; transition:.2s;
  }
  input:focus, select:focus{
    border-color:#33ddff; box-shadow:0 0 10px rgba(0,210,255,0.9); background:#001f33;
  }
  button.action{
    width:100%; padding:12px; border:none; background:var(--blue); color:#fff; font-size:16px;
    border-radius:8px; cursor:pointer; font-weight:bold; margin-top:6px; transition:.2s;
  }
  button.action:hover{ background:var(--blue-strong); }
  .result{
    background:#001f33; padding:12px; border-radius:8px; margin-top:12px; font-size:16px;
    color:var(--text-strong); box-shadow: inset 0 0 10px rgba(0,255,255,0.4); text-align:left; white-space:pre-wrap;
  }
  .grid{
    display:grid; gap:12px; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  }

  /* NORMAL CALC */
  .calc{
    max-width:460px; margin:auto; background:#00111c; border:1px solid rgba(255,255,255,.08);
    border-radius:12px; padding:14px;
  }
  .screen{
    background:#000; padding:10px 12px; border-radius:8px; text-align:right; margin-bottom:10px;
    box-shadow:0 0 8px rgba(0,170,255,0.3);
  }
  .expr{ font-size:15px; opacity:.6; word-wrap:anywhere; }
  .res{ font-size:28px; font-weight:700; word-wrap:anywhere; }
  .keys{
    display:grid; gap:6px; grid-template-columns:repeat(5, 1fr);
  }
  .key{
    padding:14px 0; background:#002a44; border:none; color:#fff; font-size:16px;
    border-radius:8px; cursor:pointer; transition:.1s;
  }
  .key.op{ background:#003a5c; }
  .key.eq{ background:#00c2ff; color:#000; font-weight:700; }
  .key.danger{ background:#cc0033; }
  .key:hover{ filter:brightness(1.08); transform:translateY(-1px); }
  .span-2{ grid-column:span 2; }
  .span-3{ grid-column:span 3; }
  footer{
    text-align:center; padding:12px; font-size:12px; color:#66e0ff; border-top:1px solid rgba(255,255,255,.06);
  }
</style>
</head>
<body>
<div class="overlay"></div>
<div class="app">
  <header>
    <h1>Mohit Donawat • Pro Accountant Calculator</h1>
    <small>Normal Calc • GST (5/12/18/28) • TDS/TCS Categories • Compound Interest • EMI (20 yrs+) • High Contrast</small>
  </header>

  <nav id="tabs">
    <button class="active" data-tab="calc">Normal Calculator</button>
    <button data-tab="gst">GST 5/12/18/28 %</button>
    <button data-tab="tds">TDS / TCS (Categories)</button>
    <button data-tab="ci">Compound Interest</button>
    <button data-tab="emi">EMI (up to 20 Years)</button>
  </nav>

  <!-- NORMAL CALCULATOR -->
  <section class="section active" id="calc">
    <div class="calc">
      <div class="screen">
        <div class="expr" id="expr">0</div>
        <div class="res" id="res">0</div>
      </div>

      <div class="keys">
        <button class="key danger" onclick="ac()">AC</button>
        <button class="key danger" onclick="backspace()">⌫</button>
        <button class="key op" onclick="toggleSign()">±</button>
        <button class="key op" onclick="percent()">%</button>
        <button class="key op" onclick="sqrt()">√</button>

        <button class="key op" onclick="mc()">MC</button>
        <button class="key op" onclick="mr()">MR</button>
        <button class="key op" onclick="mplus()">M+</button>
        <button class="key op" onclick="mminus()">M-</button>
        <button class="key op" onclick="gt()">GT</button>

        <button class="key" onclick="append('7')">7</button>
        <button class="key" onclick="append('8')">8</button>
        <button class="key" onclick="append('9')">9</button>
        <button class="key op" onclick="append('/')">÷</button>
        <button class="key op" onclick="taxPlus()">TAX+</button>

        <button class="key" onclick="append('4')">4</button>
        <button class="key" onclick="append('5')">5</button>
        <button class="key" onclick="append('6')">6</button>
        <button class="key op" onclick="append('*')">×</button>
        <button class="key op" onclick="taxMinus()">TAX-</button>

        <button class="key" onclick="append('1')">1</button>
        <button class="key" onclick="append('2')">2</button>
        <button class="key" onclick="append('3')">3</button>
        <button class="key op" onclick="append('-')">−</button>
        <button class="key op" onclick="ic()">IC</button>

        <button class="key" onclick="append('0')">0</button>
        <button class="key" onclick="append('00')">00</button>
        <button class="key" onclick="append('000')">000</button>
        <button class="key op" onclick="append('+')">+</button>
        <button class="key eq" onclick="eq()">=</button>

        <button class="key span-2" onclick="append('.')">.</button>
        <button class="key span-3" onclick="setDecimals()">DEC</button>
      </div>

      <div class="card" style="margin-top:10px;">
        <div class="title">Settings / Status</div>
        <label>Tax Rate % (for TAX+/TAX-)</label>
        <input type="number" id="taxRate" value="18">
        <button class="action" onclick="setTaxRate()">SET TAX RATE</button>

        <div class="result" id="statusBox"></div>
      </div>
    </div>
  </section>

  <!-- GST -->
  <section class="section" id="gst">
    <div class="grid">
      <div class="card">
        <div class="title">Exclusive → Inclusive (Base + GST)</div>
        <label>Base Amount</label>
        <input type="number" id="gstBase" placeholder="e.g. 1000">
        <label>GST %</label>
        <select id="gstRate1">
          <option value="5">5%</option>
          <option value="12">12%</option>
          <option value="18" selected>18%</option>
          <option value="28">28%</option>
          <option value="custom">Custom</option>
        </select>
        <input type="number" id="gstCustom1" placeholder="Custom %" style="display:none;">
        <button class="action" onclick="gstExclusiveToInclusive()">Calculate</button>
        <div class="result" id="gstOut1"></div>
      </div>

      <div class="card">
        <div class="title">Inclusive → Exclusive (Split Base & GST)</div>
        <label>Gross (Inclusive)</label>
        <input type="number" id="gstGross" placeholder="e.g. 1180">
        <label>GST %</label>
        <select id="gstRate2">
          <option value="5">5%</option>
          <option value="12">12%</option>
          <option value="18" selected>18%</option>
          <option value="28">28%</option>
          <option value="custom">Custom</option>
        </select>
        <input type="number" id="gstCustom2" placeholder="Custom %" style="display:none;">
        <button class="action" onclick="gstInclusiveToExclusive()">Calculate</button>
        <div class="result" id="gstOut2"></div>
      </div>
    </div>
  </section>

  <!-- TDS / TCS -->
  <section class="section" id="tds">
    <div class="grid">
      <div class="card">
        <div class="title">Gross → Net (TDS कटने के बाद)</div>
        <label>Gross Amount</label>
        <input type="number" id="tdsGross">
        <label>Section / Category</label>
        <select id="tdsCat1"></select>
        <label>या Custom TDS %</label>
        <input type="number" id="tdsRate1" placeholder="override %" />
        <button class="action" onclick="tdsGrossToNet()">Calculate</button>
        <div class="result" id="tdsOut1"></div>
      </div>

      <div class="card">
        <div class="title">Net → Gross (Reverse Calculation)</div>
        <label>Net Received</label>
        <input type="number" id="tdsNet">
        <label>Section / Category</label>
        <select id="tdsCat2"></select>
        <label>या Custom TDS %</label>
        <input type="number" id="tdsRate2" placeholder="override %" />
        <button class="action" onclick="tdsNetToGross()">Calculate</button>
        <div class="result" id="tdsOut2"></div>
      </div>
    </div>
  </section>

  <!-- COMPOUND INTEREST -->
  <section class="section" id="ci">
    <div class="card">
      <div class="title">Compound Interest (Yearly/Monthly)</div>
      <label>Principal (₹)</label>
      <input type="number" id="ciP">
      <label>Rate % (p.a.)</label>
      <input type="number" id="ciR" value="8">
      <label>Years (up to 20)</label>
      <input type="number" id="ciY" value="5">
      <label>Compounding</label>
      <select id="ciN">
        <option value="1">Yearly (1)</option>
        <option value="4">Quarterly (4)</option>
        <option value="12" selected>Monthly (12)</option>
        <option value="365">Daily (365)</option>
      </select>
      <button class="action" onclick="compoundInterest()">Calculate</button>
      <div class="result" id="ciOut"></div>
    </div>
  </section>

  <!-- EMI -->
  <section class="section" id="emi">
    <div class="card">
      <div class="title">EMI Calculator (up to 20 Years)</div>
      <label>Loan Amount (₹)</label>
      <input type="number" id="emiP">
      <label>Rate % (p.a.)</label>
      <input type="number" id="emiR" value="10">
      <label>Tenure</label>
      <select id="emiMode">
        <option value="months">Months</option>
        <option value="years" selected>Years</option>
      </select>
      <input type="number" id="emiT" placeholder="Enter Tenure (e.g. 20)">
      <button class="action" onclick="emiCalc()">Calculate EMI</button>
      <div class="result" id="emiOut"></div>
    </div>
  </section>

  <footer>
    © <span id="year"></span> Mohit Donawat — Built for CA / Accountant workflow
  </footer>
</div>

<script>
/* ---------------- NAV ---------------- */
document.querySelectorAll('#tabs button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('#tabs button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const tab = btn.dataset.tab;
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
  });
});
document.getElementById("year").textContent = new Date().getFullYear();

/* ---------------- NORMAL CALC ---------------- */
let expr = "";
let last = 0;
let mem = 0;
let gt_total = 0;
let tax_rate = 18;
let decimals = 2;
let ic_count = 0;

const exprEl = document.getElementById("expr");
const resEl  = document.getElementById("res");
const statusBox = document.getElementById("statusBox");

function fmt(n){
  if(typeof n !== "number" || !isFinite(n)) return "NaN";
  return n.toLocaleString(undefined, {maximumFractionDigits:8});
}
function updateScreen(){
  exprEl.textContent = expr || "0";
  resEl.textContent = isNaN(last) ? "Error" : fmt(last);
  statusBox.textContent = `Memory: ${fmt(mem)}
GT: ${fmt(gt_total)}
IC: ${ic_count}
Tax Rate: ${tax_rate}%
Decimals: ${decimals}`;
}
function safeEval(e){
  try{
    if(!/^[0-9+\-*/().% ]+$/.test(e)) return NaN;
    e = e.replace(/%/g, "/100");
    const v = Function('"use strict";return('+e+')')();
    return (typeof v === "number" && isFinite(v)) ? v : NaN;
  }catch{return NaN;}
}
function append(v){
  expr += v;
  last = safeEval(expr) || 0;
  updateScreen();
}
function eq(){
  const v = safeEval(expr);
  if(!isNaN(v)){
    last = v;
    expr = v.toString();
    gt_total += v;
  } else last = NaN;
  updateScreen();
}
function ac(){ expr=""; last=0; updateScreen(); }
function backspace(){ expr = expr.slice(0,-1); last = safeEval(expr)||0; updateScreen(); }
function toggleSign(){
  const v = safeEval(expr);
  if(!isNaN(v)){ last = -v; expr = last.toString(); updateScreen(); }
}
function percent(){
  const v = safeEval(expr);
  if(!isNaN(v)){ last = v/100; expr = last.toString(); updateScreen(); }
}
function sqrt(){
  const v = safeEval(expr);
  if(!isNaN(v) && v >= 0){ last = Math.sqrt(v); expr = last.toString(); updateScreen(); }
}
function mc(){ mem = 0; updateScreen(); }
function mr(){ expr = mem.toString(); last = mem; updateScreen(); }
function mplus(){ mem += last||0; updateScreen(); }
function mminus(){ mem -= last||0; updateScreen(); }
function gt(){ expr = gt_total.toString(); last = gt_total; updateScreen(); }
function setTaxRate(){
  const r = parseFloat(document.getElementById("taxRate").value);
  if(!isNaN(r)) tax_rate = r;
  updateScreen();
}
function taxPlus(){
  const v = safeEval(expr);
  if(!isNaN(v)){ const t = v * (1 + tax_rate/100); last = t; expr = t.toFixed(decimals); updateScreen(); }
}
function taxMinus(){
  const v = safeEval(expr);
  if(!isNaN(v)){ const b = v * 100 / (100 + tax_rate); last = b; expr = b.toFixed(decimals); updateScreen(); }
}
function ic(){ ic_count++; updateScreen(); }
function setDecimals(){
  const d = prompt("Decimals? (0/2/3)", decimals);
  const n = parseInt(d,10);
  if([0,2,3].includes(n)) decimals = n;
  updateScreen();
}
updateScreen();

// keyboard
window.addEventListener('keydown', e=>{
  const k = e.key;
  if(/[0-9.+\-*/()%]/.test(k)) append(k);
  else if(k === 'Enter'){ e.preventDefault(); eq(); }
  else if(k === 'Backspace'){ backspace(); }
  else if(k.toLowerCase() === 'c'){ ac(); }
});

/* ---------------- GST ---------------- */
const gstRate1 = document.getElementById("gstRate1");
const gstRate2 = document.getElementById("gstRate2");
const gstCustom1 = document.getElementById("gstCustom1");
const gstCustom2 = document.getElementById("gstCustom2");
gstRate1.addEventListener('change', ()=> gstCustom1.style.display = gstRate1.value === 'custom' ? 'block' : 'none');
gstRate2.addEventListener('change', ()=> gstCustom2.style.display = gstRate2.value === 'custom' ? 'block' : 'none');

function getRate(sel, customInput){
  let val = sel.value === 'custom' ? parseFloat(customInput.value || 0) : parseFloat(sel.value);
  return isNaN(val) ? 0 : val;
}
function gstExclusiveToInclusive(){
  const base = parseFloat(document.getElementById("gstBase").value||0);
  const rate = getRate(gstRate1, gstCustom1);
  const gst = base * rate/100;
  const total = base + gst;
  const cgst = gst/2, sgst = gst/2;
  document.getElementById("gstOut1").textContent =
`Base: ₹${base.toFixed(2)}
GST @ ${rate}%: ₹${gst.toFixed(2)} 
  CGST: ₹${cgst.toFixed(2)}, SGST: ₹${sgst.toFixed(2)}
Total (Inclusive): ₹${total.toFixed(2)}`;
}
function gstInclusiveToExclusive(){
  const gross = parseFloat(document.getElementById("gstGross").value||0);
  const rate = getRate(gstRate2, gstCustom2);
  const base = gross * 100 / (100 + rate);
  const gst  = gross - base;
  const cgst = gst/2, sgst = gst/2;
  document.getElementById("gstOut2").textContent =
`Gross: ₹${gross.toFixed(2)}
Base: ₹${base.toFixed(2)}
GST @ ${rate}%: ₹${gst.toFixed(2)}
  CGST: ₹${cgst.toFixed(2)}, SGST: ₹${sgst.toFixed(2)}`;
}

/* ---------------- TDS / TCS ---------------- */
const TDS_RATES = {
  "194C - Contractor (Individual/HUF) - 1%": 1,
  "194C - Contractor (Others) - 2%": 2,
  "194H - Commission/Brokerage - 5%": 5,
  "194J - Professional Fees - 10%": 10,
  "194IA - Immovable Property - 1%": 1,
  "194IB - Rent (Ind/HUF > 50k pm) - 5%": 5,
  "194M - Ind/HUF (contract/prof > 50L) - 5%": 5,
  "194Q - Purchase of goods - 0.1%": 0.1,
  "206C(1H) - TCS on Sales > 50L - 0.1%": 0.1
};
function fillTDSSelect(id){
  const sel = document.getElementById(id);
  Object.keys(TDS_RATES).forEach(k=>{
    const opt = document.createElement('option');
    opt.value = k; opt.textContent = k;
    sel.appendChild(opt);
  });
}
fillTDSSelect("tdsCat1");
fillTDSSelect("tdsCat2");

function tdsGrossToNet(){
  const gross = parseFloat(document.getElementById("tdsGross").value||0);
  const cat   = document.getElementById("tdsCat1").value;
  let rate    = parseFloat(document.getElementById("tdsRate1").value);
  if(isNaN(rate) || rate<=0){ rate = TDS_RATES[cat] || 0; }
  const tds   = gross * rate / 100;
  const net   = gross - tds;
  document.getElementById("tdsOut1").textContent =
`Section: ${cat}
Rate: ${rate}%
Gross: ₹${gross.toFixed(2)}
TDS: ₹${tds.toFixed(2)}
Net: ₹${net.toFixed(2)}`;
}
function tdsNetToGross(){
  const net  = parseFloat(document.getElementById("tdsNet").value||0);
  const cat  = document.getElementById("tdsCat2").value;
  let rate   = parseFloat(document.getElementById("tdsRate2").value);
  if(isNaN(rate) || rate<=0){ rate = TDS_RATES[cat] || 0; }
  const gross = net / (1 - rate/100);
  const tds   = gross - net;
  document.getElementById("tdsOut2").textContent =
`Section: ${cat}
Rate: ${rate}%
Net: ₹${net.toFixed(2)}
Gross: ₹${gross.toFixed(2)}
TDS: ₹${tds.toFixed(2)}`;
}

/* ---------------- COMPOUND INTEREST ---------------- */
function compoundInterest(){
  const P = parseFloat(document.getElementById("ciP").value||0);
  const R = parseFloat(document.getElementById("ciR").value||0)/100;
  let   Y = parseFloat(document.getElementById("ciY").value||0);
  const n = parseInt(document.getElementById("ciN").value,10);
  if(Y>20) Y = 20; // limit 20 years
  const A = P * Math.pow((1 + R/n), n*Y);
  const interest = A - P;
  document.getElementById("ciOut").textContent =
`Principal: ₹${P.toFixed(2)}
Rate: ${(R*100).toFixed(2)}%
Years: ${Y}
Compounds/Year: ${n}
Maturity: ₹${A.toFixed(2)}
Interest: ₹${interest.toFixed(2)}`;
}

/* ---------------- EMI ---------------- */
function emiCalc(){
  const P = parseFloat(document.getElementById("emiP").value||0);
  const R = parseFloat(document.getElementById("emiR").value||0);
  const mode = document.getElementById("emiMode").value;
  let   T = parseFloat(document.getElementById("emiT").value||0);
  if(mode === 'years') T = T * 12; // convert to months
  if(T > 240) T = 240; // 20 years max
  const r = R/12/100;
  const emi = (P*r*Math.pow(1+r, T)) / (Math.pow(1+r, T) - 1);
  const total = emi * T;
  const interest = total - P;
  document.getElementById("emiOut").textContent =
`Loan: ₹${P.toFixed(2)}
Rate (p.a.): ${R.toFixed(2)}%
Tenure (months): ${T}
EMI: ₹${emi.toFixed(2)}
Total Interest: ₹${interest.toFixed(2)}
Total Payment: ₹${total.toFixed(2)}`;
}
</script>
</body>
</html>
